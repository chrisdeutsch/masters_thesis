\chapter{Identification of Hadronically Decaying $\tau$-Leptons (BDT)}
\label{sec:bdt}

\section{Features of Hadronically Decaying Tau Leptons}
\label{sec:features_tau_decay}

Features of hadronically decaying $\tau$-leptons vs. Quark/Gluon initiated jets


\section{Event Simulation, Reweighting and Preselection}
\label{sec:bdt_eventsim}

\begin{itemize}
\item Gammatautau (Polarisation), Dijet JZ1W - JZ6W
\item Reweighting
\item Baseline selection ($\eta$, $p_\mathrm{T}$, truth-matching)
\item Sample sizes
\end{itemize}


\section{Description of the Tau-Identification Procedure}
\label{sec:bdt_tauid}

\subsection{Features (Predictors, Dependent Variables, Input Variables)}
\label{sec:bdt_features}

Previous setup (incl. explanation \& plots of input variables)

Transformations?

\subsection{Working Points}
\label{sec:bdt_working_points}

Working points (Gammatautau -- Ztautau)

Signal efficiencies 1P (3P):
\begin{itemize}
\item Very Loose: 95\% (95\%)
\item Loose: 85\% (75\%)
\item Medium: 75\% (60\%)
\item Tight: 60\% (45\%)
\end{itemize}

\section{Hyperparameter Optimisation}
\label{sec:bdt_hyperparam}

TMVA \cite{tmva}.

Quickly describe previous setup.

Before proceeding to feature selection a reliable hyperparameter setup has to be
found.

\subsection{Boosting Algorithm}
\label{sec:bdt_boosting}

AdaBoost \textrightarrow GradBoost

\subsection{Exhaustive Grid Search}
\label{sec:bdt_grid_search}

\begin{align*}
  &N_\mathrm{Tree} \in \{25, 50, 100, 200, 400, 800\} \qquad
  &d_\mathrm{Tree} \in \{4, 6, 8, 12, 16\} \\
  &\eta \in \{0.05, 0.1, 0.2, 0.4\} \qquad
  &f_\mathrm{min}^\mathrm{node} \in \{0.01, 0.1, 1.0\}
\end{align*}

TMVA Grid Search
XGBoost (?)
Comparison with previous setup

\section{Feature Selection}
\label{sec:bdt_feature_selection}

\subsection{Variable Importance}
\label{sec:bdt_var_importance}

Variable correlations, importance (dropped variables) \& dependence with
$p_\mathrm{T}$ (2D Hist - including pt), Variable Transformations (instead
of cutting out outliers), Partial Dependence, Including $p_\mathrm{T}$

\section{Identification Performance on Simulated Data}
\label{sec:bdt_perf}

\subsection{Performance in Simulation}
\label{sec:bdt_perf_sim}

Impact on (reconstructed) decay modes (?)

\subsubsection{Performance on Quark- / Gluon-initiated Jets}
\label{sec:bdt_perf_quark_gluon}

Impact of Quark / Gluon initiated jets on Tau-ID (i.e. performance of ID
on Quark / Gluon jets)

\subsection{Performance on Data}
\label{sec:bdt_perf_data}

Performance on TAUP4 (?)

% -------------------------------------------------------------------------- %
\begin{itemize}
\item Description \& Plots of the input variables
  \begin{itemize}
  \item How does etOverPtLeadTrk differ from EMPOverTrkSysP for 1-prong taus?
  \end{itemize}

\item Preselection
  \begin{itemize}
  \item $p_\mathrm{T} > \SI{20}{\GeV}$ (reconstructed \& truth)
  \item $| \eta | < 2.5$ (reconstructed \& truth)
  \item $| \eta | \notin \left[ 1.37, 1.52 \right]$ (reconstructed \& truth)
  \item truth-matched taus
  \end{itemize}

\item Train baseline for comparison (with default outlier removal)
  \begin{itemize}
  \item NTrees 100 (explain)
  \item MinNodeSize 0.1 (explain)
  \item BoostType AdaBoost (explain)
  \item SeparationType GiniIndex (explain)
  \item PruneMethod NoPruning
  \item UseYesNoLeaf False (explain)
  \item AdaBoostBeta 0.2 (explain)
  \item DoBoostMonitor True
  \item nCuts 200 (explain)
  \item MaxDepth 8 (explain)
  \end{itemize}

\item Switch from AdaBoost to GradBoost (Explain why we don't do a full
  optimization of the AdaBoost vs GradBoost setup)

\item Variable transformations (log, clamp, uniformization)
  \begin{align}
    &\text{SumPtTrkFrac:} &\log(x + 10^{-4}) \\
    &\text{absipSigLeadTrk:} &\min(x, 30) \\
    &\text{mEflowApprox:} &\log(x) \\
    &\text{centFrac:} &\min(x, 1) \\
    &\text{innerTrkAvgDist:} &- \\
    &\text{ptRatioEflowApprox:} &\min(x, 4) \\
    &\text{EMPOverTrkSysP:} &\log(\max(10^{-3}, x)) \\
    &\text{etOverPtLeadTrk:} &\log(\max(0.1, x)) \\
    &\text{ChPiEMEOverCaloEME:} &\max(-4, \min(x, 5)) \\
    &\text{trFlightPathSig:} &\log(\max(0.01, x)) \\
    &\text{massTrkSys:} &\log(x) \\
    &\text{dRmax:} &-
  \end{align}

\item BDT optimization for R21 (Total 480 BDTs) -- If enough time try 50\%
  bagging
  \begin{itemize}
  \item[NTrees] 25, 50, 100, 200, 400, 800
  \item[Depth] 4, 6, 8, 12, 18
  \item[Shrinkage] 0.05, 0.1, 0.2, 0.4
  \item[MinNodeSize] (0.001), 0.01, 0.1, 1.0
  \end{itemize}


\item Variable importance (Google: Variable Importance Measures)
  \begin{itemize}
  \item Drop-one test
  \item Partial dependence (can we use a two way partial dependence plot to
    show interaction of pt and another variable?)
    \url{http://scikit-learn.org/stable/modules/ensemble.html#interpretation}
  \end{itemize}

\item $p_\mathrm{T}$-dependency 2D histograms of (centFrac / innerTrkAvgDist --
  worse \& SumPtTrkFrac -- should get better) (Plot 'variable separation' vs.
  pt)

\item Performance on gluon / quark initiated jets

\item Cross check with data (jets only)?

\end{itemize}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "mythesis"
%%% End:
